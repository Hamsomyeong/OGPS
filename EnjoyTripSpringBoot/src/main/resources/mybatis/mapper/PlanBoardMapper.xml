<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.ssafy.enjoy.board.repository.PlanBoardRepository">
  	<resultMap type="attractionDto" id="attraction">
		<result column="content_id" property="content_id"/>
		<result column="content_type_id" property="content_type_id"/>
		<result column="title" property="title"/>
		<result column="addr1" property="addr1"/>
		<result column="addr2" property="addr2"/>
		<result column="zipcode" property="zipcode"/>
		<result column="tel" property="tel"/>
		<result column="first_image" property="first_image"/>
		<result column="first_image2" property="first_image2"/>
		<result column="readcount" property="readcount"/>
		<result column="sido_code" property="sido_code"/>
		<result column="gugun_code" property="gugun_code"/>
		<result column="latitude" property="latitude"/>
		<result column="longitude" property="longitude"/>
		<result column="mlevel" property="mlevel"/>
	</resultMap>
  	
  	<!-- 게시판 -->
  	<insert id="write" parameterType="PlanBoardDto">
		insert into plan(user_id,subject,content,register_time,start_time,end_time)
		values(#{user_id},#{subject},#{content},now(),#{start_time},#{end_time})
	</insert>
  	
  	<insert id="writePath" parameterType="string">
  		insert into plan_path(plan_id,content_id) values(#{a},#{str})
  	</insert>
  	
  	<select id="getAuto" resultType="int">
  		select last_insert_id()
  	</select>
  	
  	<!-- view -->
  	<select id="getInfo" parameterType="string" resultMap="attraction">
  		select * from attraction_info where title Like CONCAT('%',#{title},'%');
  	</select>
  	
  </mapper>